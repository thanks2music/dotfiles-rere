# Filesystem
alias ..="cd ../"
alias ...="cd ../.."
alias ....="cd ../../.."
alias o=$EDITOR
alias vi=nvim
alias vim=nvim
alias dotf="cd $HOME/dotfiles"
alias dotfiles="cd $HOME/dotfiles"

# Shell
alias ls='ls --color=auto'
alias ll='ls -la --block-size=KB'
alias la='ls -A'
alias lal='ls -l -A --block-size=KB'
alias lsof-listen='lsof -i -P | grep "LISTEN"'
alias reload-shell='exec $SHELL -l'

# Git
alias g='git'
alias a='add-git-files'
alias d='git diff'
alias s='git status'
alias st='git status -s'
alias gm= 'git co master'
alias ga='git add -A'
alias gg='git grep'
alias git-tags-top10='git for-each-ref --sort=-creatordate --format="%(refname:short)" refs/tags | head -n 10'
alias r='restore-git-files' # hide 'r' which is zsh's built-in command

# Tmux
alias t='tmux'
## 新しいセッションを作成
alias tn='tmux new -s'
## セッションをKill
alias tk='tmux kill-session -t'
## セッションに attach（無ければ引数に指定した名前でセッション）
alias ta='(){ tmux attach -t "$1" 2>/dev/null || tmux new -s "$1"; }'
## セッションに attach (無ければ新しいセッション作成)
alias tan='tmux attach || tmux new -s'
## デタッチ（セッションを残して離脱）
alias td='tmux detach'
## セッション一覧
alias tls='tmux ls'
alias reload='source $HOME/.zshrc && exec $SHELL'

# LLM CLI

## Claude
### 使用量確認
alias claude-cost='bunx ccusage'

### セッションID検索
alias claude-search-sessionid='grep -i "$1" ~/.claude/history.jsonl | jq -r ".sessionId" | sort -u'

### セッションIDと日時と内容を表示
claude-find() {
  grep -i "$1" ~/.claude/history.jsonl | jq -r '[.sessionId, (.timestamp/1000 | strftime("%Y-%m-%d %H:%M")),
.display[:80]] | join(" | ")'
}

# Node
alias pn='pnpm'
alias pm='pnpm'

# rcs
alias vimrc='vi ~/.vimrc'
alias zshrc='vi ~/.zshrc'
alias cloudrc='vi ~/.cloudrc'
alias aliasrc='vi ~/.aliasrc'
alias tmuxrc='vi ~/.tmux.conf'
alias sshrc='vi ~/.ssh/config'

# Terminal
## History
alias zshlog='vi ~/.zsh_history'

# Directories
autoload zmv
alias zmv='noglob zmv -W'
alias zcp='noglob zmv -C'
alias zln='noglob zmv -L'
alias zsy='noglob zmv -Ls'

if type go > /dev/null; then
  alias go-get='GO111MODULE=off go get -u'
  alias go-build-all='go test -run=^$ ./... 1>/dev/null'
fi

if type docker > /dev/null; then
  alias docker-rm-all='docker rm $(docker ps -a -q)'
  alias docker-rmi-all='docker rmi $(docker images -q)'
  alias docker-run-sh='docker run -it --entrypoint sh'
fi

if type bazelisk > /dev/null; then
  alias bazel='bazelisk'
fi

if type ibazel > /dev/null; then
  alias ibazel-go-test='ibazel --run_output_interactive=false -nolive_reload test :go_default_test'
fi

if type bat > /dev/null; then
  alias cat='bat'
fi

